import os
import random


def generate_random_bytes(length):
    """
    Generate a random byte sequence of the given length.
    """
    return os.urandom(length)


def save_to_file(byte_sequence, filename):
    """
    Save the byte sequence to a new file.
    """
    with open(filename, "wb") as file:
        file.write(byte_sequence)


def append_to_file(byte_sequence, filename):
    """
    Append the byte sequence to the end of an existing binary file.
    """
    with open(filename, "ab") as file:
        file.write(byte_sequence)


def filter_files(folder_path, exclude_list_file):
    # Read the exclude list from the text file
    with open(exclude_list_file, "r") as file:
        exclude_list = [line.strip() for line in file]

    # Filter and return files not in the exclude list
    included_files = []
    for file in os.listdir(folder_path):
        if file not in exclude_list and os.path.isfile(os.path.join(folder_path, file)):
            included_files.append(file)

    return included_files


exclude_list_file = r"D:\Repos\mw-detection-using-image\backdoor\benign_file_names.txt"


included_files = filter_files(
    r"D:\Repos\mw-detection-using-image\data\original_data\benign\arm",
    exclude_list_file,
)

print(len(included_files))
